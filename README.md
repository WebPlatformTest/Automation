# Automation
Use BrowserStack and WebDriver to automatically generate test reports for HTML5test.com
This is a command line tool that is responsible for new browser reports ending up on HTML5test.com. 

Everyday this script should be run and it should do the following:

* Query BrowserStack for all browsers that are available.
* Query HTML5test for all reports that are generated by BrowserStack.
* See if there are new browsers available for which we do not have any results.
 
For each new browser browser it should do the following:

* Using an identier from BrowserStack get a Task from HTML5test
* Using WebDriver start a browser on BrowserStack 
* Load the URL we got from the task in the browser
* Poll HTML5test repeatedly (with a timeout) to see if we got any data
* If we did, show the score and print an URL to the test report.



###The API for HTML5test is as follows

The API endpoint is `http://alpha.html5test.com`, but later this will be changed to `https://html5test.com`.

````
GET /api/getIdentifiers?source=browserstack

[ ]
````

````
GET /api/getTask?source=browserstack&identifier=foobar

{
  "task":"38648337-c477-49d3-a755-a8f88507aabd",
  "url":"http:\/\/alpha.html5test.com\/index.html?task=38648337-c477-49d3-a755-a8f88507aabd&source=browserstack&identifier=foobar"
}
````

````
GET /api/hasTask?task=38648337-c477-49d3-a755-a8f88507aabd

false
````

````
GET /api/hasTask?task=38648337-c477-49d3-a755-a8f88507aabd

{
  "source":"browserstack",
  "identifier":"foobar",
  "score":514,
  "fingerprint":"9809e293eb5239758156e8268520fd67",
  "url":"http:\/\/alpha.html5test.com\/s\/ed5c522f95bb00e6.html"
}
````

````
GET /api/getIdentifiers?source=browserstack

[ "foobar" ]
````

###The API for BrowserStack can be found here:
https://www.browserstack.com/automate/php and 
https://www.browserstack.com/automate/rest-api

In order to use these APIs you'll need a username and an access key. To get one you can sign up for a free trail at browserstack.com. When this tool is deployed we are going to use actual accounted sponsored by BrowserStack.

###Tools we need to use:
https://github.com/facebook/php-webdriver


###Thanks to:
<a href="https://www.browserstack.com"><img src="https://html5te.st/assets/browserstack.svg" width="180"></a>
